--- a/mkspecs/devices/linux-rasp-pi-g++/qeglfshooks_pi.cpp	2013-10-23 12:18:15.924834340 +0200
+++ b/mkspecs/devices/linux-rasp-pi-g++/qeglfshooks_pi.cpp	2013-10-23 12:18:25.104834476 +0200
@@ -146,7 +146,7 @@
     virtual EGLNativeWindowType createNativeWindow(QPlatformWindow *window, const QSize &size, const QSurfaceFormat &format);
     virtual void destroyNativeWindow(EGLNativeWindowType window);
     virtual bool hasCapability(QPlatformIntegration::Capability cap) const;
-
+    virtual QSurfaceFormat surfaceFormatFor(const QSurfaceFormat &inputFormat) const;
 };
 
 void QEglFSPiHooks::platformInit()
@@ -196,6 +196,18 @@
     }
 }
 
+QSurfaceFormat QEglFSPiHooks::surfaceFormatFor(const QSurfaceFormat &inputFormat) const
+{
+    QSurfaceFormat format = inputFormat;
+    format.setDepthBufferSize(24);
+    format.setStencilBufferSize(8);
+    format.setRedBufferSize(8);
+    format.setGreenBufferSize(8);
+    format.setBlueBufferSize(8);
+    format.setAlphaBufferSize(8);
+    return format;
+}
+
 QEglFSPiHooks eglFSPiHooks;
 QEglFSHooks *platformHooks = &eglFSPiHooks;
 
